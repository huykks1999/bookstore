(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{1070:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n.n(r),a=n(1),i=n.n(a),c=(n(6),n(2)),u=n(27),s=n.n(u),l=n(9),p=n(23),f=n(15),d=n.n(f),h=n(11);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=5e3,k=c.default.div.withConfig({displayName:"SnackBar__Wrapper",componentId:"cdh0b2-0"})(["position:relative;display:flex;justify-content:space-between;align-items:center;width:450px;padding:12px 16px;background-color:#ffffff;border-bottom:2px solid ",";border-radius:4px;box-shadow:0 0 4px rgba(0,0,0,0.24);overflow:hidden;opacity:0;z-index:999;transition:opacity 0.3s ease;> .type-icon{display:flex;justify-content:center;align-items:center;width:34px;height:34px;color:",";font-size:24px;line-height:0;border:2px solid ",";border-radius:50%;}> .message{flex:1;margin:0 18px 0 12px;color:#242424;font-size:14px;line-height:18px;}> .btn-close{cursor:pointer;position:absolute;top:5px;right:6px;color:#242424;font-size:22px;line-height:0;}> button{cursor:pointer;padding:10px 12px;color:#ffffff;text-decoration:none;background-color:",";border:none;border-radius:4px;outline:none;}"],function(e){return e.color},function(e){return e.color},function(e){return e.color},function(e){return e.color}),C=document.getElementById("snack-bar"),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,i.a.Component);var t,n,r,o=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),w(v(t=o.call(this,e)),"timer",void 0),w(v(t),"startTimer",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;t.timer=setTimeout(function(){t.handleClickClose()},e)}),w(v(t),"clearTimer",function(){t.timer&&(clearTimeout(t.timer),t.timer=void 0)}),w(v(t),"transitionEnd",function(){try{if(!t.state.opacity){C.removeChild(t.el);var e=t.props.onClose;e&&e()}}catch(e){console.log("SNACK_BAR",e)}}),w(v(t),"onClick",function(e){e.preventDefault(),t.handleClickClose();var n=t.props.action;n&&"function"==typeof n.onClick&&n.onClick()}),w(v(t),"handleClickClose",function(e){e&&e.preventDefault(),t.setState({opacity:0}),t.clearTimer()}),t.state={opacity:0},t.el=document.createElement("div"),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;try{C.appendChild(this.el),setTimeout(function(){e.setState({opacity:1},function(){e.startTimer()})},100)}catch(e){console.log("SNACK_BAR",e)}}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.type,a=r.message,c=r.action,u=this.state.opacity;switch(o){case"info":e=i.a.createElement(h.u,null),t="#002e6e";break;case"success":e=i.a.createElement(h.d,null),t="#50b83c";break;case"warning":e=i.a.createElement(h.u,null),t="#edc200";break;case"error":e=i.a.createElement(h.i,null),t="#ed6347";break;default:e=i.a.createElement(h.u,null),t="#002e6e"}return d.a.createPortal(i.a.createElement(k,{color:t,onMouseEnter:this.clearTimer,onMouseLeave:function(){return n.startTimer(3e3)},onTransitionEnd:this.transitionEnd,style:{opacity:u}},i.a.createElement("div",{className:"type-icon"},e),i.a.createElement("p",{className:"message"},a||""),c&&i.a.createElement("button",{onClick:this.onClick},c.text||""),!c&&i.a.createElement("a",{onClick:this.handleClickClose,className:"btn-close"},i.a.createElement(h.i,null))),this.el)}}])&&y(t.prototype,n),r&&y(t,r),a}();w(_,"defaultProps",{type:"info",message:void 0,action:void 0,onClose:void 0});var S=n(26),O=n(196),j=n(17);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;return R(e)}(this,n)}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=c.default.a.withConfig({displayName:"LikeButton__Wrapper",componentId:"ib7r1v-0"})(["cursor:pointer;display:flex;align-items:center;margin-right:35px;color:#888888;font-size:13px;font-weight:300;"," &:hover{color:#00afef;}.icon{margin-right:10px;margin-bottom:5px;}"],function(e){return e.thanked&&"\n    font-weight: 500;\n    color: #199dff;\n  "}),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,i.a.Component);var t,n,r,a=D(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),z(R(t=a.call(this,e)),"onClick",function(){var e,n=(e=o.a.mark(function e(n){var r,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,a=r.questionId,i=r.showError,e.prev=1,n.preventDefault(),a&&!t.state.thanked){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(j.a)({url:"/v2/questions/".concat(a,"/thank"),method:"POST"});case 7:return e.next=9,t.setState({thanked:!0});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&i({message:e.t0.response.data.error.message||"",code:e.t0.response.data.error.code||500});case 14:case"end":return e.stop()}},e,null,[[1,11]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){T(a,r,o,i,c,"next",e)}function c(e){T(a,r,o,i,c,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()),t.state={thanked:e.thanked||!1},t}return t=c,(n=[{key:"render",value:function(){var e=this.state.thanked;return i.a.createElement(I,{onClick:this.onClick,thanked:e},i.a.createElement("i",{className:"icon thumb-up"}),e?"Đã thích":"Thích")}}])&&N(t.prototype,n),r&&N(t,r),c}();z(M,"defaultProps",{questionId:-1,thanked:!1,showError:function(){}});var Q=n(325);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function K(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){V(a,r,o,i,c,"next",e)}function c(e){V(a,r,o,i,c,"throw",e)}i(void 0)})}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;return Y(e)}(this,n)}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=c.default.div.withConfig({displayName:"QAndA__Wrapper",componentId:"opige1-0"})(["margin:40px 0;max-width:920px;.container{background-color:#ffffff;border-radius:4px;overflow:hidden;.help{margin:0;padding:0 20px 20px;list-style:none;li{font-size:12px;margin-bottom:10px;&:last-child{margin-bottom:0;color:#888888;}}a{color:#007ff0;}}}"]),H=c.default.div.withConfig({displayName:"QAndA__Question",componentId:"opige1-1"})(["display:flex;padding:20px 0;border-bottom:1px solid #f7f7f7;.like{width:110px;margin:0;color:#333333;font-size:24px;font-weight:400;text-align:center;span{display:block;margin-top:3px;color:#1c1c1c;font-size:13px;}}.content{flex:1;padding:0 20px 0 10px;p{margin:0 0 12px;}.question{color:#333333;font-size:15px;font-weight:500;}.answer{color:#787878;font-size:15px;font-weight:400;line-height:18px;}.author{color:#787878;font-size:12px;}.buttons{display:flex;margin-top:15px;a{cursor:pointer;display:flex;align-items:center;margin-right:35px;color:#888888;font-size:13px;font-weight:300;&:hover{color:#00afef;}.icon{margin-right:10px;margin-bottom:5px;}}}}"]),X=c.default.a.withConfig({displayName:"QAndA__ViewAllButton",componentId:"opige1-2"})(["display:block;color:#007ff0;font-size:13px;font-weight:400;padding:15px 20px;border-bottom:1px solid #f7f7f7;"]),Z=c.default.div.withConfig({displayName:"QAndA__Form",componentId:"opige1-3"})(["display:flex;padding:20px;.input-group{flex:1;input{width:100%;height:40px;padding:0 10px;font-size:13px;border:1px solid #e0e0e0;border-radius:4px;transition:border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s;&:focus{border-color:#66afe9;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);}}p{margin:5px 0 0 0;font-size:11px;font-weight:400;&.success{color:#26bc4e;}&.error{color:#a94442;}}}button{cursor:pointer;width:154px;height:40px;margin-left:10px;padding:0;color:#333333;font-size:13px;font-weight:500;background:#fdd22f;border:0;border-radius:4px;outline:none;&:hover{opacity:0.8;}}"]),$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(c,i.a.Component);var t,n,r,a=W(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),U(Y(t=a.call(this,e)),"getData",K(o.a.mark(function e(){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.props.productId,e.next=4,Object(j.a)({url:"/v2/questions?product_id=".concat(n,"&include=answers&sort=created_at|desc&limit=3")});case 4:if(!(r=e.sent)||!r.data){e.next=8;break}return e.next=8,t.setState({data:r.data});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Q_AND_A",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))),U(Y(t),"handleQuestionText",function(e){t.setState({questionText:e.target.value})}),U(Y(t),"sendQuestion",function(){var e=K(o.a.mark(function e(n){var r,a,i,c,u,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),r=(r=t.state.questionText).trim()){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.setState({questionSuccess:"",questionError:""});case 8:return a=t.props.productId,(i=new FormData).append("product_id",a),i.append("content",r),e.next=14,Object(j.a)({url:"/v2/questions",method:"POST",data:i});case 14:if(!((c=e.sent)&&c.data&&c.data.created)){e.next=19;break}return e.next=18,t.setState({questionSuccess:c.data.message||""});case 18:setTimeout(function(){t.setState({questionSuccess:"",questionText:""})},5e3);case 19:e.next=30;break;case 21:if(e.prev=21,e.t0=e.catch(0),console.log("Q_AND_A",e.t0),e.t0&&e.t0.response){e.next=26;break}return e.abrupt("return");case 26:u=e.t0.response,s="",u.data&&u.data.error&&(s=u.data.error.message||""),401===u.status?t.showError({message:s}):t.setState({questionError:s});case 30:case"end":return e.stop()}},e,null,[[0,21]])}));return function(t){return e.apply(this,arguments)}}()),U(Y(t),"showError",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.message,r=e.code;t.setState({errorVisible:!0,errorMessage:n,errorCode:r})}),U(Y(t),"onCloseError",function(){t.setState({errorVisible:!1,errorCode:"",errorMessage:"Có lỗi xảy ra"})}),U(Y(t),"renderQuestions",function(){var e=t.props.urlKey,n=t.state.data;return(n=n&&n.data&&n.data.length>0?n.data:[]).map(function(n,r){return i.a.createElement(H,{key:r},i.a.createElement("p",{className:"like"},n.thank_count,i.a.createElement("span",null,"Thích")),i.a.createElement("div",{className:"content"},i.a.createElement("p",{className:"question"},n.content),n.answers&&n.answers.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"answer"},n.answers[0].content),i.a.createElement("p",{className:"author"},n.answers[0].created_by&&n.answers[0].created_by.name," trả lời vào"," ",s()(n.answers[0].created_at).format("DD/MM/YYYY"))):null,i.a.createElement("div",{className:"buttons"},i.a.createElement(M,{questionId:n.id,thanked:n.thanked,showError:function(e){return t.showError(e)}}),i.a.createElement("a",{href:"/".concat(e,"/hoi-dap/").concat(n.id)},i.a.createElement("i",{className:"icon reply-arrow"}),"Trả lời"))))})}),t.state={errorVisible:!1,errorMessage:"",errorCode:"",questionText:"",questionSuccess:"",questionError:"",data:void 0},t}return t=c,(n=[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){e.productId!==this.props.productId&&this.getData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.productId,o=this.state,a=o.errorVisible,c=o.errorMessage,u=o.errorCode,s=o.questionText,l=o.questionSuccess,p=o.questionError,f=o.data,d=0;return f&&f.paging&&f.paging.total&&(d=f.paging.total),i.a.createElement(G,null,i.a.createElement(O.a,null,n),i.a.createElement("div",{className:"container"},this.renderQuestions(),d>3&&i.a.createElement(X,{href:"/product/".concat(r,"/hoi-dap")},"Xem tất cả các câu hỏi đã được trả lời"),i.a.createElement(Z,null,i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",value:s,onChange:this.handleQuestionText,placeholder:"Hãy đặt câu hỏi liên quan đến sản phẩm..."}),""!=l&&i.a.createElement("p",{className:"success"},l),p&&i.a.createElement("p",{className:"error"},p)),i.a.createElement("button",{onClick:this.sendQuestion},"Gửi câu hỏi")),0===d&&i.a.createElement("ul",{className:"help"},i.a.createElement("li",null,"Các câu hỏi thường gặp về sản phẩm:"),i.a.createElement("li",null,"- Chế độ bảo hành cùng cách thức vận chuyển sản phẩm này thế nào?"),i.a.createElement("li",null,"- Kích thước sản phẩm này?"),i.a.createElement("li",null,"- Sản phẩm này có dễ dùng không?"),i.a.createElement("li",null,"Các câu hỏi liên quan đến sản phẩm hư hỏng, cần đổi trả, ... Vui lòng truy cập trang hỗ trợ"," ",i.a.createElement("a",{href:"https://hotro.tiki.vn",target:"_blank"},"https://hotro.tiki.vn")))),i.a.createElement(Q.default,{style:{width:"401"==u?300:500},closeAble:!0,onCloseModal:this.onCloseError,footerLayout:"401"==u?"full":"normal",footer:"401"==u?i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.ModalButton,{type:"primary",onClick:function(){e.props.handleLoginModal(!0),e.onCloseError()}},"Đăng nhập")):null,visible:a},c))}}])&&L(t.prototype,n),r&&L(t,r),c}();U($,"defaultProps",{productId:-1,urlKey:""});t.default=Object(l.b)(null,function(e){return{handleLoginModal:Object(p.b)(S.i,e)}})($)}}]);